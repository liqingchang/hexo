---
title: 敏捷估计与规划笔记
date: 2016-04-21 16:59:12
tags: ACP
---
流水账式地边读边记录，目的是为了提高吸收率，并且能在未来当成复习资料使用。

1. 项目需要有一个有效的开发计划，比如X个月后交付，这个交付版本包含某些功能，以及可能包含另外一些功能。
2. 敏捷计划是易于修改的计划，因为各种原因（需求往往会在开发的过程中被修改），因为这些修改的需求对应的计划也应该得到改变

## 第二章 规划失败的原因

1. 基于活动而不是基于功能进行规划
1.1 活动不会提前完成，如果评估时间为N天，那么研发会充分使用这N天，而不会提前完成
1.2 延误沿着进度表向下传递，因为活动不会提前完成（1.1）所以活动基本只有延误的可能，而存在依赖关系的活动会因为前一项活动的延误导致后一项活动不能按时开始
1.3 活动不是独立的，当前一项活动延误的话，后一项活动因为不能按时开始，它也（高概率/一定）会延误

2. 多任务处理导致更多的延迟
多任务处理导致生产效率降低，并且传统意义上的分配工作远远早于工作开始时间，也就是说活动延误的可能性、延误传递的可能性更大，随着延误，需要并行处理的任务可能会越来越多，进而降低生产效率。理想状态是所有人都处于100%的负荷下发挥100%的效率，实际不可能达到。

3. 不按优先级开发功能
4. 忽视了不确定性
考虑到项目的不确定性，最初的计划交付时间应该是一个不确定的值（比如6月-8月某个时间交付），随着项目进展，这个值慢慢会变得清晰,而应付这种不确定性的最佳方法是迭代
5. 把估计当做承诺
估计是指计划的可能性，我们不可能对可能性做承诺。

小结
基于活动的规划分散了我们对功能的注意力，而功能才是衡量客户价值的单元。采用基于活动的计划所得到的进度表时，许多问题都可能导致延迟交付。项目的参与者出于好意把多任务处理当做一个可行的解决延误方法，但是由于多任务处理不可避免的会降低生产效率，实际上会导致更严重的延误。当进度表（距离交付日期）剩余时间不多的时候，不可避免地需要放弃一些功能。由于计划没有按照优先级进行开发，所以放弃的功能不一定是对用户来讲价值最低的。
不要混淆估计和承诺，做一个估计，并不等于为这个估计作出承诺。
*个人看法：现在的项目组，虽然有走敏捷流程，但是实际上没有对交付做一个长远的估计，也就是说，我们知道每个迭代要做什么，但是我们没有一个长远的目标（交付时间），比如计划7月要产出一个版本，这个版本会包含哪些重要功能，然后短期迭代则会为此而努力。没有长远目标的缺点直观感受是不能最大限度的激发组员的激情和效率，迭代投入程度调得太低会导致组员懒散，投入程度太高会导致迭代无法正常完成。解决方法估计是我们需要为3-5个迭代后发布的一个大版本做一个预计和规划，确保一些大功能能顺利上线。然而直至写这些文字的时候，我们都只为迭代做计划，不会为更远的目标做计划。*

## 第三章 敏捷方法
敏捷宣言
* 个人与交互终于开发过程与工具
* 可用的软件重于复杂的文档
* 寻求客户的合作重于对合同的谈判
* 对变化的响应重于始终遵循固定的计划

### 3.1 项目的敏捷开发方法
敏捷开发小组的主要工作方式：
##### 3.1.1 作为一个整体工作
一个成功的敏捷开发小组应该具有“我们一起参与其中”的思想
敏捷开发小组会有一些特定的角色并且承担特定的任务
* 产品所有者 Product Owner：确认小组所有成员都在追求一个共同的项目前景（好玄），确定功能的优先级保证小组总是在处理最具有价值的功能以及作出决定使得项目投入能产生良好回报。商业软件中，产品所有者通常是公司市场部门或者产品管理部门的人员；在内部软件中，产品所有者通常是实际用户、用户的上级、分析员，也有可能是为项目提供资金的人。
* 客户 Customer：在商业软件中，客户是作出决定将会购买软件的人；内部软件中，客户通常是另一个团队或者团队代表（往往会跟产品所有者重合），无论是商业软件还是内部软件，客户都不一定是用户，这点要注意（也就是说，客户不一定知道用户的真实需求）
* 开发人员 Developer：概括指所有开发软件的人员，包括程序员、测试、架构师、设计师等
* 项目经理 Project Manager：敏捷开发项目中项目经理更多地关注领导而不是管理，敏捷开发项目中，项目经理角色的人也有可能会承担其他角色，比如开发人员，少数情况也会承担产品所有者。

##### 3.1.2 按短迭代周期工作

##### 3.1.3 每次迭代交付一些成果
每个迭代的交付成果都应该是经过编码以及**测试**，达到可以发布的质量。在每次迭代结束的时候让产品达到潜在可交付状态是很重要的。虽然不一定每个迭代版本都需要进行发布，但是要保证每个迭代版本都达到发布要求。因为单次迭代（往往）不一定能开发出满足用户要求的新功能，所以往往把多次迭代组成一次发布（Release），一个迭代是2～4周，一次发布通常是2～6个月。

##### 3.1.4 关注优先级
敏捷开发小组按照产品所有者（PO）所制定的顺序交付功能，并且关注完成和交付具有用户价值的功能。
达到这个目的的最佳方法是一种叫用户故事（User Story）的表示软件需求的轻量级技术。
一个用户故事是从系统用户或者客户的角度出发对功能的一个简要描述。这个描述往往类似这样：作为<用户类型>，我希望可以有<功能/能力>以便实现<业务价值>。比如：作为购书者，我希望可以通过ISBN找到一本书，以便更快的找到正确的书的信息。

##### 3.1.5 检查与调整

### 3.2 敏捷规划方法
我们不应该把一个项目单纯地看作是执行一系列（既定）的步骤，事实上把项目看作是迅速、可靠地产生一个可用的新功能和新知识的流程是很重要的。新功能在产品中交付，新知识则被用于让这个产品达到它所能达到的最好状态。*无论是产品、还是项目相关的知识，我们都会在开发（迭代）过程中不断进步，把新的知识应用于产品、项目，使产品更加优秀，使项目流程更加规范*。

##### 3.2.1 规划的不同层次
* 发布规划 目标是为有关项目范围、进度和资源的问题确定适当的解决方案。发布规划在项目启动的时候进行，并在迭代的过程中不断完善。
* 迭代规划 在每次迭代开始的时候进行，产品所有者（PO）会根据上一个迭代工作按照优先级确定下一个迭代的工作。
* 每日规划 每日例会，同步和协调各个组员的工作。

##### 3.2.2 满意条件
用来衡量项目是否成功的标准
![图1](/images/敏捷估计与规划图1.png)
建立发布（Release）计划，并作为迭代输入，进行迭代计划安排，迭代结束后产生迭代版本，根据迭代进度和实际要求变化，可能会更改发布计划，更改发布计划又（可能）会改变下一个迭代的迭代计划。无论是迭代计划还是发布计划，都是从考虑产品所有者（PO）的满意条件开始。

# 第二部分 规模估计

## 第四章 使用故事点估计规模
我们所需要知道的仅是某个特定的用户故事或者功能是比其他用户故事或功能大一些还是小一些，就能根据情况来进行一定程度的评估。

### 4.1 故事点是相对的
故事点反映了用户故事的总体规模，是对开发该功能所需工作量、开发工作发咋程度和风险等的综合评估。
开始故事点估计的两种方法
* 在将要处理的用户故事中，从最小的用户故事里选择一个，估计为1个故事点
* 选择一个基本处于中等的用户故事，然后给它分配一个大致处于取值范围中间值的故事点值。

### 4.2 速度
速度（velocity）是对开发小组进度率的估量。可以通过计算小组在一次迭代中完成的故事点总和来得到速度。
? 基于故事点的估计把对工作量的估计和对持续时间的估计完全隔离。

## 第五章 使用理想日进行估计
理想时间（ideal time）是某件事剔除了所有外围活动之后所需要的时间
耗用时间（elapsed time）是实际流逝的时间

### 5.1 理想时间和软件开发
实际软件开发，理想时间和耗用时间不同的原因是成员每天都会遇到各种各样的自然的系统开销（而不是全部时间都用来进行开发，所以有投入程度的概念），比如打电话、沟通、进行面试、回复邮件等
在实际软件开发的过程中，我们可以选择用理想日（ideal day）来对用户故事或者其他工作进行估计，使用理想日进行估计时，需要假定：
* 所估计的用户故事是将处理的唯一工作
* 所需要的资源在开始工作时都会准备好
* 不会被打断

### 5.2 以理想日作为对规模的度量
### 5.3 给出一个而不是多个估计值

## 第6章 估计方法
![图6.1](/images/敏捷估计与规划图6.1.png)
回报渐减法则，回报的增长幅度随着投入的增加而减少，类似于经济学边际效应
图6.1表明在估计中花更多的时间来获得一个更精准的估计时间并不会产生更多的实际价值
应该根据估计的目的来改变话费在估计上的工作量（投入时间）。

### 6.1 共同估计
估计不应该由开发小组的单个人建立。
（我们现在的敏捷流程的所有工作都由我个人进行估计和确定，导致估计误差较大，是一个很大的问题，在宽松的环境下，会导致资源的浪费）
正确的方式应该是由项目组的所有人一起评估

### 6.2 估计的尺度
方案1： 1 2 3 5 8 斐波那契数列
方案2： 1 2 4 8

史诗： 大型用户故事，对于还不确定是否需要的功能或者最近不会实现的功能
主题： 一组相关的用户故事，估计和发布中都会被当成一个单一实体

### 6.3 得到估计值的方法
3中最常用的估计方法：
* 专家意见（expert opinion）
* 类比（analogy）
* 裂解（disaggregation）
就是对大型的用户故事（因为大型用户故事往往不好估计）进行任务拆分，但是需要注意的是拆分过度很容易忘记某些任务，而且估计误差也会增大。

### 6.4 规划扑克
这是一个听上去很有趣又有效的游戏，但是我还没有实行过

## 第7章 重估
当我们确信一个用户故事的相对大小发生了变化的时候，才需要重新估计
（这一部分有点点不明白）总而言之，在发现迭代进度出现问题（延误）需要进行重估的时候，需要先把已经完成的旧issue重估故事点来获取一个正确的速度，然后再对相同类型的用户故事进行重估故事点，得到正确的新的迭代计划。
在计算速度的时候，按照要么全有，要么全无的态度：如果一个用户故事已经完成（研发/测试/验收），小组得到所有点数，否则什么都得不到

## 第8章 在故事点和理想日之间进行选择
### 8.1 故事点的优势
* 故事点有助于驱动跨功能的行为
* 故事点估计不会过期
* 故事点是对规模的纯粹度量
* 故事点估计通常更快
* 我的理想日不等于你的理想日

### 8.2 理想日的优势
* 理想日更容易对外解释
* 理想日估计更容易开启

# 第三部分 为价值作规划
在做项目规划之前，必须考虑用户需要的到底是什么。简单地建立我们认为他们想要的东西的列表，然后安排这些功能的开发进度表是**不够的**。要建立产品功能（范围）、进度和成本的最佳组合，需要对发布的刹那品种将要包含的用户故事和主题的成本和价值进行深远的考虑。

## 第9章 确定主题的优先级
### 9.1 确定优先级时的因素
* 价值
* 成本
* 学习
* 风险







